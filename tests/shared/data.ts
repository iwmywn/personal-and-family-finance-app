import { ObjectId } from "mongodb"

import { toDecimal128 } from "@/actions/utils"
import type { AppCurrency } from "@/lib/currency"
import type {
  Budget,
  Category,
  DBBudget,
  DBCategory,
  DBExchangeRate,
  DBGoal,
  DBRecurringTransaction,
  DBTransaction,
  DBUser,
  Goal,
  RecurringTransaction,
  Transaction,
} from "@/lib/definitions"
import { localDateToUTCMidnight, normalizeToUTCMidnight } from "@/lib/utils"

export const mockUser: DBUser = {
  _id: new ObjectId("68f712e4cda4897217a05a1c"),
  name: "Test User",
  email: "testuser@gmail.com",
  emailVerified: true,
  image: undefined,
  createdAt: new Date("2025-09-19T11:27:41.038Z"),
  updatedAt: new Date("2025-09-19T12:50:48.129Z"),
  username: "testuser",
  displayUsername: "testuser",
  locale: "vi-VN",
  currency: "VND",
  twoFactorEnabled: false,
}

export const mockTransaction: DBTransaction = {
  _id: new ObjectId("68f73357357d93dcbaae8106"),
  userId: mockUser._id,
  type: "expense" as "income" | "expense",
  categoryKey: "food_beverage",
  amount: toDecimal128("50000"),
  currency: "VND",
  description: "hamburger",
  date: localDateToUTCMidnight(new Date("2024-01-15")),
}

export const mockCustomCategory: DBCategory = {
  _id: new ObjectId("68f732914e63e5aa249cc173"),
  userId: mockUser._id,
  categoryKey: "abcdef12",
  type: "expense" as "income" | "expense",
  label: "Entertainment",
  description: "Movies and games",
}

export const mockBudget: DBBudget = {
  _id: new ObjectId("68f795d4bdcc3c9a30717988"),
  userId: mockUser._id,
  categoryKey: "food_beverage",
  allocatedAmount: toDecimal128("1000000"),
  currency: "VND",
  startDate: localDateToUTCMidnight(new Date("2024-01-01")),
  endDate: localDateToUTCMidnight(new Date("2024-01-31")),
}

export const mockGoal: DBGoal = {
  _id: new ObjectId("68f896e5cda4897217a05a2d"),
  userId: mockUser._id,
  categoryKey: "salary_bonus",
  name: "buy a motorbike",
  targetAmount: toDecimal128("50000000"),
  currency: "VND",
  startDate: localDateToUTCMidnight(new Date("2024-01-01")),
  endDate: localDateToUTCMidnight(new Date("2024-12-31")),
}

export const mockRecurringTransaction: DBRecurringTransaction = {
  _id: new ObjectId("68f896e5cda4897217a05a3e"),
  userId: mockUser._id,
  type: "income" as "income" | "expense",
  categoryKey: "salary_bonus",
  amount: toDecimal128("5000000"),
  currency: "VND",
  description: "Monthly Salary",
  frequency: "monthly",
  randomEveryXDays: undefined,
  startDate: localDateToUTCMidnight(new Date("2024-01-01")),
  endDate: localDateToUTCMidnight(new Date("2024-12-31")),
  lastGenerated: undefined,
  isActive: true,
}

export const mockExchangeRates: DBExchangeRate[] = [
  {
    _id: new ObjectId("68f800001234567890abcde1"),
    date: normalizeToUTCMidnight(new Date("2024-01-15T23:59:59Z")),
    rates: {
      CNY: toDecimal128("7.0"),
      JPY: toDecimal128("150.0"),
      KRW: toDecimal128("1300.0"),
      VND: toDecimal128("25000.0"),
    },
  },
  {
    _id: new ObjectId("68f800001234567890abcde2"),
    date: normalizeToUTCMidnight(new Date("2024-01-25T23:59:59Z")),
    rates: {
      CNY: toDecimal128("7.1"),
      JPY: toDecimal128("151.0"),
      KRW: toDecimal128("1310.0"),
      VND: toDecimal128("25100.0"),
    },
  },
  {
    _id: new ObjectId("68f800001234567890abcde3"),
    date: normalizeToUTCMidnight(new Date("2024-02-20T23:59:59Z")),
    rates: {
      CNY: toDecimal128("7.2"),
      JPY: toDecimal128("152.0"),
      KRW: toDecimal128("1320.0"),
      VND: toDecimal128("25200.0"),
    },
  },
]

export const mockValidTransactionValues = {
  type: "income" as "income" | "expense",
  categoryKey: "business_freelance",
  currency: "VND" as AppCurrency,
  amount: "2500000",
  description: "freelance project payment",
  date: localDateToUTCMidnight(new Date("2024-02-05")),
}

export const mockValidCategoryValues = {
  // categoryKey: auto generated
  type: "income" as "income" | "expense",
  label: "Salary",
  description: "Monthly job income",
}

export const mockValidBudgetValues = {
  categoryKey: "food_beverage",
  currency: "VND" as AppCurrency,
  allocatedAmount: "1000000",
  startDate: localDateToUTCMidnight(new Date("2024-01-01")),
  endDate: localDateToUTCMidnight(new Date("2024-01-31")),
}

export const mockValidGoalValues = {
  categoryKey: "food_beverage",
  currency: "VND" as AppCurrency,
  name: "buy a motorbike",
  targetAmount: "50000000",
  startDate: localDateToUTCMidnight(new Date("2024-01-01")),
  endDate: localDateToUTCMidnight(new Date("2024-12-31")),
}

export const mockValidRecurringTransactionValues = {
  type: "income" as "income" | "expense",
  categoryKey: "business_freelance",
  currency: "VND" as AppCurrency,
  amount: "2500000",
  description: "Freelance project payment",
  frequency: "monthly" as const,
  randomEveryXDays: undefined,
  startDate: localDateToUTCMidnight(new Date("2024-02-01")),
  endDate: localDateToUTCMidnight(new Date("2024-12-31")),
  lastGenerated: undefined,
  isActive: true,
}

export const mockTransactions: Transaction[] = [
  {
    _id: "1",
    userId: "68f712e4cda4897217a05a1c",
    type: "income",
    amount: "1000",
    currency: "VND",
    description: "Salary",
    categoryKey: "salary_bonus",
    date: new Date("2024-01-15"),
  },
  {
    _id: "2",
    userId: "68f712e4cda4897217a05a1c",
    type: "expense",
    amount: "200",
    currency: "VND",
    description: "Groceries",
    categoryKey: "food_beverage",
    date: new Date("2024-01-16"),
  },
  {
    _id: "3",
    userId: "68f712e4cda4897217a05a1c",
    type: "income",
    amount: "500",
    currency: "VND",
    description: "Freelance",
    categoryKey: "business_freelance",
    date: new Date("2024-01-20"),
  },
  {
    _id: "4",
    userId: "68f712e4cda4897217a05a1c",
    type: "expense",
    amount: "100",
    currency: "VND",
    description: "Transport",
    categoryKey: "transportation",
    date: new Date("2024-01-22"),
  },
  {
    _id: "5",
    userId: "68f712e4cda4897217a05a1c",
    type: "expense",
    amount: "300",
    currency: "VND",
    description: "Rent",
    categoryKey: "housing",
    date: new Date("2024-01-25"),
  },
  {
    _id: "6",
    userId: "68f712e4cda4897217a05a1c",
    type: "expense" as const,
    amount: "500000",
    currency: "VND",
    description: "Food expense",
    categoryKey: "food_beverage",
    date: new Date("2024-02-15"),
  },
  {
    _id: "7",
    userId: "68f712e4cda4897217a05a1c",
    type: "expense" as const,
    amount: "400000",
    currency: "VND",
    description: "Transport expense",
    categoryKey: "transportation",
    date: new Date("2024-03-20"),
  },
  {
    _id: "8",
    userId: "68f712e4cda4897217a05a1c",
    type: "expense" as const,
    amount: "2100000",
    currency: "VND",
    description: "Housing expense",
    categoryKey: "housing",
    date: new Date("2024-04-10"),
  },
  {
    _id: "9",
    userId: "68f712e4cda4897217a05a1c",
    type: "income" as const,
    amount: "1000000",
    currency: "VND",
    description: "Salary",
    categoryKey: "salary_bonus",
    date: new Date("2025-01-10"),
  },
]

export const mockCustomCategories: Category[] = [
  {
    _id: "1",
    userId: "68f712e4cda4897217a05a1c",
    categoryKey: "abcdef12",
    type: "income",
    label: "Freelance Work",
    description: "Custom freelance category",
  },
  {
    _id: "2",
    userId: "68f712e4cda4897217a05a1c",
    categoryKey: "abcdef13",
    type: "expense",
    label: "Restaurant",
    description: "Custom food category",
  },
  {
    _id: "3",
    userId: "68f712e4cda4897217a05a1c",
    categoryKey: "abcdef14",
    type: "expense",
    label: "Taxi",
    description: "Custom transport category",
  },
]

export const mockBudgets: Budget[] = [
  {
    _id: "1",
    userId: "68f712e4cda4897217a05a1c",
    categoryKey: "food_beverage",
    allocatedAmount: "1000000",
    currency: "VND",
    // related transactions: [6]
    startDate: new Date("2024-02-01"),
    endDate: new Date("2024-02-28"),
  },
  {
    _id: "2",
    userId: "68f712e4cda4897217a05a1c",
    categoryKey: "transportation",
    allocatedAmount: "500000",
    currency: "VND",
    // related transactions: [7]
    startDate: new Date("2024-03-01"),
    endDate: new Date("2024-03-28"),
  },
  {
    _id: "3",
    userId: "68f712e4cda4897217a05a1c",
    categoryKey: "housing",
    allocatedAmount: "2000000",
    currency: "VND",
    // related transactions: [8]
    startDate: new Date("2024-04-01"),
    endDate: new Date("2024-04-28"),
  },
  {
    _id: "4",
    userId: "68f712e4cda4897217a05a1c",
    categoryKey: "food_beverage",
    allocatedAmount: "1500000",
    currency: "VND",
    // related transactions: [7]
    startDate: new Date("2024-03-01"),
    endDate: new Date("2024-03-28"),
  },
  {
    _id: "5",
    userId: "68f712e4cda4897217a05a1c",
    categoryKey: "business_freelance",
    allocatedAmount: "3000000",
    currency: "VND",
    // related transactions: [1, 2, 3, 4, 5]
    startDate: new Date("2023-01-01"),
    endDate: new Date("2023-01-31"),
  },
]

export const mockGoals: Goal[] = [
  {
    _id: "1",
    userId: "68f712e4cda4897217a05a1c",
    categoryKey: "salary_bonus",
    name: "buy a motorbike",
    targetAmount: "50000000",
    currency: "VND",
    startDate: new Date("2024-01-01"),
    endDate: new Date("2024-12-31"),
  },
  {
    _id: "2",
    userId: "68f712e4cda4897217a05a1c",
    categoryKey: "business_freelance",
    name: "buy a house",
    targetAmount: "2000000000",
    currency: "VND",
    startDate: new Date("2024-01-01"),
    endDate: new Date("2025-12-31"),
  },
  {
    _id: "3",
    userId: "68f712e4cda4897217a05a1c",
    categoryKey: "business_freelance",
    name: "freelance tax buffer",
    targetAmount: "600",
    currency: "VND",
    startDate: new Date("2024-01-01"),
    endDate: new Date("2024-01-31"),
  },
  {
    _id: "4",
    userId: "68f712e4cda4897217a05a1c",
    categoryKey: "business_freelance",
    name: "freelance emergency fund",
    targetAmount: "400",
    currency: "VND",
    startDate: new Date("2024-01-01"),
    endDate: new Date("2024-01-31"),
  },
  {
    _id: "5",
    userId: "68f712e4cda4897217a05a1c",
    categoryKey: "investment_passive",
    name: "2023 dividend reinvestment",
    targetAmount: "1000000",
    currency: "VND",
    startDate: new Date("2023-01-01"),
    endDate: new Date("2023-12-31"),
  },
  {
    _id: "6",
    userId: "68f712e4cda4897217a05a1c",
    categoryKey: "gift_support",
    name: "holiday gifts fund",
    targetAmount: "1500000",
    currency: "VND",
    startDate: new Date("2024-11-01"),
    endDate: new Date("2025-01-31"),
  },
]

export const mockRecurringTransactions: RecurringTransaction[] = [
  {
    _id: "1",
    userId: "68f712e4cda4897217a05a1c",
    type: "income",
    categoryKey: "salary_bonus",
    amount: "5000000",
    currency: "VND",
    description: "Monthly Salary",
    frequency: "monthly",
    randomEveryXDays: undefined,
    startDate: new Date("2024-01-01"),
    endDate: new Date("2024-12-31"),
    lastGenerated: undefined,
    isActive: true,
  },
  {
    _id: "2",
    userId: "68f712e4cda4897217a05a1c",
    type: "expense",
    categoryKey: "food_beverage",
    amount: "500000",
    currency: "VND",
    description: "Weekly Groceries",
    frequency: "weekly",
    randomEveryXDays: undefined,
    startDate: new Date("2024-01-15"),
    endDate: new Date("2024-06-30"),
    lastGenerated: undefined,
    isActive: true,
  },
  {
    _id: "3",
    userId: "68f712e4cda4897217a05a1c",
    type: "expense",
    categoryKey: "transportation",
    amount: "200000",
    currency: "VND",
    description: "Monthly Transport Pass",
    frequency: "monthly",
    startDate: new Date("2024-02-01"),
    endDate: undefined,
    isActive: true,
  },
  {
    _id: "4",
    userId: "68f712e4cda4897217a05a1c",
    type: "expense",
    categoryKey: "housing",
    amount: "3000000",
    currency: "VND",
    description: "Rent Payment",
    frequency: "monthly",
    randomEveryXDays: undefined,
    startDate: new Date("2024-03-01"),
    endDate: new Date("2024-03-31"),
    lastGenerated: undefined,
    isActive: false,
  },
  {
    _id: "5",
    userId: "68f712e4cda4897217a05a1c",
    type: "income",
    categoryKey: "business_freelance",
    amount: "2000000",
    currency: "VND",
    description: "Freelance Project",
    frequency: "bi-weekly",
    randomEveryXDays: undefined,
    startDate: new Date("2023-12-01"),
    endDate: new Date("2023-12-31"),
    lastGenerated: undefined,
    isActive: false,
  },
  {
    _id: "6",
    userId: "68f712e4cda4897217a05a1c",
    type: "expense",
    categoryKey: "food_beverage",
    amount: "100000",
    currency: "VND",
    description: "Daily Coffee",
    frequency: "daily",
    randomEveryXDays: undefined,
    startDate: new Date("2024-01-10"),
    endDate: new Date("2024-02-29"),
    lastGenerated: undefined,
    isActive: true,
  },
  {
    _id: "7",
    userId: "68f712e4cda4897217a05a1c",
    type: "expense",
    categoryKey: "transportation",
    amount: "50000",
    currency: "VND",
    description: "Random Taxi Rides",
    frequency: "random",
    randomEveryXDays: 3,
    startDate: new Date("2024-04-01"),
    endDate: undefined,
    lastGenerated: undefined,
    isActive: true,
  },
]
